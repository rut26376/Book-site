<div class="menu-container">
  <!-- Header -->
  <header class="menu-header">
    <div class="header-left">
      <div class="logo">📚 מספר ספרים</div>
      <button class="cart-btn" (click)="goToCart()" title="סל קניות">
        <img src="/assets/general/cart.png" alt="Basket" class="cart-icon">
      </button>
    </div>
    <div class="search-box">
      <input type="text" placeholder="חיפוש..." class="search-input" [(ngModel)]="searchQuery"
        (ngModelChange)="search(searchQuery)">
    </div>
    <div class="header-right">
      <img src="../../../public/logo.png" alt="Logo" class="logo-image">
      
      <!-- Auth Buttons / User Profile -->
      <div class="auth-section">
        <div *ngIf="!currentUser" class="auth-buttons">
          <button class="auth-btn login-btn" (click)="openLoginModal()">התחברות</button>
          <button class="auth-btn register-btn" (click)="openRegisterModal()">הרשמה</button>
        </div>
        <div *ngIf="currentUser" class="user-profile">
          <span class="user-name">{{ currentUser.fullName }}</span>
          <button class="logout-btn" (click)="logout()">התנתקות</button>
        </div>
      </div>
    </div>
  </header>

  <!-- תיבת חיפוש עם Dropdown של תוצאות -->
  <div class="search-results-dropdown" *ngIf="searchBooks.length > 0">
    <div class="search-results-list">
      <div class="search-result-item" *ngFor="let book of searchBooks" (click)="viewBook(book)">
        <div class="result-image">
          <img src="/assets/book-img/{{ book.picture }}" [alt]="book.bookName" />
        </div>
        <div class="result-info">
          <h4 class="result-name">{{ book.bookName }}</h4>
          <p class="result-author">{{ book.author }}</p>
          <span class="result-price">₪ {{ book.price }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Categories Navigation -->
  <nav class="categories">
    <button class="category-btn" *ngFor="let category of categories" (click)="filterByCategory(category.main)">
      <img [src]="category.icon" [alt]="category.main" class="category-icon" />
      <span class="category-name">{{ category.main }}</span>
    </button>
  </nav>
</div>

<!-- Auth Modal -->
<app-auth-modal></app-auth-modal>
