<div class="category-container">
    <!-- Header -->
    <div class="category-header">
        @if(selectedSubCategory) {
            <h1><span (click)="selectSubCategory(null)" style="cursor: pointer;">{{ categoryName }}</span> / {{selectedSubCategory}}</h1>
        } @else {
            <h1>{{ categoryName }}</h1>
        }
    </div>

    <div class="content-wrapper">
        <!-- Sidebar Filter -->
        <aside class="filter-sidebar">
            <div class="filter-section">
                <h3 class="filter-title">סינון</h3>
                
                <div class="filter-group">
                    <h4 class="filter-group-title">תת קטגוריות</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input 
                                type="radio" 
                                name="subcategory" 
                                [checked]="selectedSubCategory === null"
                                (change)="selectSubCategory(null)"
                            />
                            <span>הכל</span>
                        </label>
                        <label *ngFor="let subCat of subCategories" class="filter-option">
                            <input 
                                type="radio" 
                                name="subcategory"
                                [checked]="selectedSubCategory === subCat"
                                (change)="selectSubCategory(subCat)"
                            />
                            <span>{{ subCat }}</span>
                        </label>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Books Grid -->
        <main class="books-section">
            <div class="books-grid">
                <div *ngFor="let book of books" class="book-card" (click)="viewBook(book.id)">
                    <!-- Book Image -->
                    <div class="book-image-wrapper">
                        <img [src]="'/assets/book-img/' + book.picture" [alt]="book.bookName" class="book-image" />
                    </div>

                    <!-- Book Info -->
                    <div class="book-info">
                        <h3 class="book-title">{{ book.bookName }}</h3>
                        <p class="book-author">{{ book.author }}</p>
                        
                        <div class="price-section">
                            <p class="book-price">₪{{ book.price }}</p>
                        </div>

                        <!-- Quantity Controls -->
                        <div class="quantity-control">
                            <button class="qty-btn" (click)="decreaseQuantity(book.id); $event.stopPropagation()">−</button>
                            <span class="qty-display">{{ getQuantity(book.id) }}</span>
                            <button class="qty-btn" (click)="increaseQuantity(book.id); $event.stopPropagation()">+</button>
                        </div>

                        <button class="add-to-cart-btn" (click)="addToCart(book); $event.stopPropagation()">
                            הוסף לסל
                        </button>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="books.length === 0" class="no-books">
                <p>לא נמצאו ספרים בקטגוריה זו</p>
            </div>
        </main>
    </div>
</div>